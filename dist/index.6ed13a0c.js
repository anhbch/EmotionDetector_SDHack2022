let faceapi,video,canvas,faceOptions,detections=[],happy_count=0,sad_count=0,angry_count=0,happy_sum=0,sad_sum=0,angry_sum=0;function setup(){canvas=createCanvas(480,360),canvas.id("canvas"),video=createCapture(VIDEO),video.id("video"),video.size(width,height),faceOptions={withLandmarks:!0,withExpressions:!0,withDescriptors:!0,minConfidence:.5},faceapi=ml5.faceApi(video,faceOptions,faceReady)}function start(){faceapi=ml5.faceApi(video,faceOptions,faceReady)}function faceReady(){faceapi.detect(gotFaces)}function gotFaces(a,t){a?console.log(a):(detections=t,clear(),drawBoxs(detections),drawLandmarks(detections),drawExpressions(detections,20,250,14),faceapi.detect(gotFaces))}function drawBoxs(a){if(a.length>0)for(f=0;f<a.length;f++){let{_x:t,_y:e,_width:s,_height:n}=a[f].alignedRect._box;stroke(44,169,225),strokeWeight(1),noFill(),rect(t,e,s,n)}}function drawLandmarks(a){if(a.length>0)for(f=0;f<a.length;f++){let t=a[f].landmarks.positions;for(let a=0;a<t.length;a++)stroke(44,169,225),strokeWeight(3),point(t[a]._x,t[a]._y)}}async function drawExpressions(a,t,e,s){if(a.length>0){let{neutral:t,happy:e,angry:s,sad:n,disgusted:o,surprised:i,fearful:c}=a[0].expressions;textFont("Helvetica Neue"),textSize(14),noStroke(),fill(44,169,225),updateData(nf(100*e,2,2),nf(100*n,2,2),nf(100*s,2,2));e>=.05&&(happy_count+=1,happy_sum+=e),n>=.05&&(sad_count+=1,sad_sum+=n),s>=.1&&(angry_count+=1,angry_sum+=s),localStorage.setItem("overall_happy",happy_sum/happy_count),localStorage.setItem("overall_sad",sad_sum/sad_count),localStorage.setItem("overall_angry",angry_sum/angry_count)}}function updateData(a,t,e){barChart.data.datasets[0].data[0]=a,barChart.data.datasets[0].data[1]=t,barChart.data.datasets[0].data[2]=e,barChart.update()}
//# sourceMappingURL=index.6ed13a0c.js.map
